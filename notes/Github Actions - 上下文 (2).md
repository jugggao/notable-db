---
title: Github Actions - 上下文
created: 2022-09-29T07:43:26.744Z
modified: 2022-09-29T07:49:38.961Z
---

# Github Actions - 上下文

## 介绍

### 使用上下文

- 索引语法：github['sha']
- 属性引用语法：github.sha

### 上下文可用性

| 工作流中的键                                     | 允许使用的上下文                                                          | 特殊函数                                       |
| ------------------------------------------------ | ------------------------------------------------------------------------- | ---------------------------------------------- |
| run-name                                         | github, inputs                                                            |                                                |
| concurrency                                      | github, inputs                                                            |                                                |
| env                                              | github, secrets, inputs                                                   |                                                |
| jobs.<job_id>.concurrency                        | github, needs, strategy, matrix, inputs                                   |                                                |
| jobs.<job_id>.container                          | github, needs, strategy, matrix, env, secrets, inputs                     |                                                |
| jobs.<job_id>.container.credentials              | github, needs, strategy, matrix, env, secrets, inputs                     |                                                |
| jobs.<job_id>.container.env.<env_id>             | github, needs, strategy, matrix, job, runner, env, secrets, inputs        |                                                |
| jobs.<job_id>.continue-on-error                  | github, needs, strategy, matrix, inputs                                   |                                                |
| jobs.<job_id>.defaults.run                       | github, needs, strategy, matrix, env, inputs                              |                                                |
| jobs.<job_id>.env                                | github, needs, strategy, matrix, secrets, inputs                          |                                                |
| jobs.<job_id>.environment                        | github, needs, strategy, matrix, inputs                                   |                                                |
| jobs.<job_id>.environment.url                    | github, needs, strategy, matrix, job, runner, env, steps, inputs          |                                                |
| jobs.<job_id>.if                                 | github, needs, inputs                                                     | always, cancelled, success, failure            |
| jobs.<job_id>.name                               | github, needs, strategy, matrix, inputs                                   |                                                |
| jobs.<job_id>.outputs.<output_id>                | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs |                                                |
| jobs.<job_id>.runs-on                            | github, needs, strategy, matrix, inputs                                   |                                                |
| jobs.<job_id>.secrets.<secrets_id>               | github, needs, strategy, matrix, secrets, inputs                          |                                                |
| jobs.<job_id>.services                           | github, needs, strategy, matrix, inputs                                   |                                                |
| jobs.<job_id>.services.<service_id>.credentials  | github, needs, strategy, matrix, env, secrets, inputs                     |                                                |
| jobs.<job_id>.services.<service_id>.env.<env_id> | github, needs, strategy, matrix, job, runner, env, secrets, inputs        |                                                |
| jobs.<job_id>.steps.continue-on-error            | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs | hashFiles                                      |
| jobs.<job_id>.steps.env                          | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs | hashFiles                                      |
| jobs.<job_id>.steps.if                           | github, needs, strategy, matrix, job, runner, env, steps, inputs          | always, cancelled, success, failure, hashFiles |
| jobs.<job_id>.steps.name                         | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs | hashFiles                                      |
| jobs.<job_id>.steps.run                          | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs | hashFiles                                      |
| jobs.<job_id>.steps.timeout-minutes              | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs | hashFiles                                      |
| jobs.<job_id>.steps.with                         | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs | hashFiles                                      |
| jobs.<job_id>.steps.working-directory            | github, needs, strategy, matrix, job, runner, env, secrets, steps, inputs | hashFiles                                      |
| jobs.<job_id>.strategy                           | github, needs, inputs                                                     |                                                |
| jobs.<job_id>.timeout-minutes                    | github, needs, strategy, matrix, inputs                                   |                                                |
| jobs.<job_id>.with.<with_id>                     | github, needs, strategy, matrix, inputs                                   |                                                |
| on.workflow_call.inputs.<inputs_id>.default      | github, inputs                                                            |                                                |
| on.workflow_call.outputs.<output_id>.value       | github, jobs, inputs                                                      |                                                |

### 打印上下文信息

```yaml
name: Context testing
on: push

jobs:
  dump_contexts_to_log:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub context
        id: github_context_step
        run: echo '${{ toJSON(github) }}'
      - name: Dump job context
        run: echo '${{ toJSON(job) }}'
      - name: Dump steps context
        run: echo '${{ toJSON(steps) }}'
      - name: Dump runner context
        run: echo '${{ toJSON(runner) }}'
      - name: Dump strategy context
        run: echo '${{ toJSON(strategy) }}'
      - name: Dump matrix context
        run: echo '${{ toJSON(matrix) }}'
```

## github 上下文

| 属性名称                   | 类型   | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| -------------------------- | ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `github`                   | `object` | 顶级 github 上下文，包含以下所有属性                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `github.action`            | `string` |    当前步骤的名称，  |
| `github.action_path`       | `string` |   |
| `github.action_ref`        | `string` | For a step executing an action, this is the ref of the action being executed. For example, v2.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `github.action_repository` | `string` | For a step executing an action, this is the owner and repository name of the action. For example, actions/checkout.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `github.action_status`     | `string` | For a composite action, the current result of the composite action.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `github.actor`             | `string` | The username of the user that triggered the initial workflow run. If the workflow run is a re-run, this value may differ from github.triggering_actor. Any workflow re-runs will use the privileges of github.actor, even if the actor initiating the re-run (github.triggering_actor) has different privileges.                                                                                                                                                                                                                                                                                                                                                                                                 |
| `github.api_url`           | `string` | The URL of the GitHub REST API.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `github.base_ref`          | `string` | The base_ref or target branch of the pull request in a workflow run. This property is only available when the event that triggers a workflow run is either pull_request or pull_request_target.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `github.env`               | `string` | Path on the runner to the file that sets environment variables from workflow commands. This file is unique to the current step and is a different file for each step in a job. For more information, see "Workflow commands for GitHub Actions."                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `github.event`             | `object` | The full event webhook payload. You can access individual properties of the event using this context. This object is identical to the webhook payload of the event that triggered the workflow run, and is different for each event. The webhooks for each GitHub Actions event is linked in "Events that trigger workflows." For example, for a workflow run triggered by the push event, this object contains the contents of the push webhook payload.                                                                                                                                                                                                                                                        |
| `github.event_name`        | `string` | The name of the event that triggered the workflow run.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `github.event_path`        | `string` | The path to the file on the runner that contains the full event webhook payload.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `github.graphql_url`       | `string` | The URL of the GitHub GraphQL API.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `github.head_ref`          | `string` | The head_ref or source branch of the pull request in a workflow run. This property is only available when the event that triggers a workflow run is either pull_request or pull_request_target.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `github.job`               | `string` | The job_id of the current job. Note: This context property is set by the Actions runner, and is only available within the execution steps of a job. Otherwise, the value of this property will be null.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `github.ref`               | `string` | The fully-formed ref of the branch or tag that triggered the workflow run. For workflows triggered by push, this is the branch or tag ref that was pushed. For workflows triggered by pull_request, this is the pull request merge branch. For workflows triggered by release, this is the release tag created. For other triggers, this is the branch or tag ref that triggered the workflow run. This is only set if a branch or tag is available for the event type. The ref given is fully-formed, meaning that for branches the format is refs/heads/<branch_name>, for pull requests it is refs/pull/<pr_number>/merge, and for tags it is refs/tags/<tag_name>. For example, refs/heads/feature-branch-1. |
| `github.ref_name`          | `string` | The short ref name of the branch or tag that triggered the workflow run. This value matches the branch or tag name shown on GitHub. For example, feature-branch-1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `github.ref_protected`     | `string` | true if branch protections are configured for the ref that triggered the workflow run.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `github.ref_type`          | `string` | The type of ref that triggered the workflow run. Valid values are branch or tag.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `github.path`              | `string` | Path on the runner to the file that sets system PATH variables from workflow commands. This file is unique to the current step and is a different file for each step in a job. For more information, see "Workflow commands for GitHub Actions."                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `github.repository`        | `string` | The owner and repository name. For example, Codertocat/Hello-World.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `github.repository_owner`  | `string` | The repository owner's name. For example, Codertocat.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `github.repositoryUrl`     | `string` | The Git URL to the repository. For example, git://github.com/codertocat/hello-world.git.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `github.retention_days`    | `string` | The number of days that workflow run logs and artifacts are kept.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `github.run_id`            | `string` | A unique number for each workflow run within a repository. This number does not change if you re-run the workflow run.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `github.run_number`        | `string` | A unique number for each run of a particular workflow in a repository. This number begins at 1 for the workflow's first run, and increments with each new run. This number does not change if you re-run the workflow run.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `github.run_attempt`       | `string` | A unique number for each attempt of a particular workflow run in a repository. This number begins at 1 for the workflow run's first attempt, and increments with each re-run.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `github.secret_source`     | `string` | The source of a secret used in a workflow. Possible values are None, Actions, Dependabot, or Codespaces.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `github.server_url`        | `string` | The URL of the GitHub server. For example: https://github.com.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `github.sha`               | `string` | The commit SHA that triggered the workflow. The value of this commit SHA depends on the event that triggered the workflow. For more information, see "Events that trigger workflows." For example, ffac537e6cbbf934b08745a378932722df287a53.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `github.token`             | `string` | A token to authenticate on behalf of the GitHub App installed on your repository. This is functionally equivalent to the GITHUB_TOKEN secret. For more information, see "Automatic token authentication." Note: This context property is set by the Actions runner, and is only available within the execution steps of a job. Otherwise, the value of this property will be null.                                                                                                                                                                                                                                                                                                                               |
| `github.triggering_actor`  | `string` | The username of the user that initiated the workflow run. If the workflow run is a re-run, this value may differ from github.actor. Any workflow re-runs will use the privileges of github.actor, even if the actor initiating the re-run (github.triggering_actor) has different privileges.                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `github.workflow`          | `string` | The name of the workflow. If the workflow file doesn't specify a name, the value of this property is the full path of the workflow file in the repository.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `github.workspace`         | `string` | The default working directory on the runner for steps, and the default location of your repository when using the checkout action.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
